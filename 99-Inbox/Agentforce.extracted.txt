

===== PAGE 1 =====
Step-by-step Guide Agentforce 
 
Introduction to Agentforce 
 
Agentforce is a powerful tool designed to effectively utilize all the data collected and unified 
within Data Cloud.  The fully customizable & autonomous AI agents connect to enterprise data 
and take actions based on how we train them. By using this powerful tool, we can build Agents 
that can automate business processes, making it easier for your team to tap into 360 views of 
customers and to provide sales development representatives & personalized, optimized support 
agents with Salesforce tools like Apex code, prompt templates, and flows. 
 
Ultimately, the goal of Agentforce is to go beyond basic chatbot functionality, and move into 
more complex, autonomous actions, by engaging in advanced reasoning and decision-making. 
 
In this step-by-step guide, we will use our example company -  Sunshine Trails Hospitality, and 
activate Agentforce to use guest data to clearly understand past stays & reservations.  Let’s tap 
into the power of Agentforce to review guest data, make recommendations based on past 
interests & provide the best experience possible to Sunshine Trails Hospitality guests! 
 
Technical Benefits of Agentforce​
​
Agentforce is at the forefront of Salesforce’s AI technology and offers numerous technical 
benefits.  These include autonomous task execution, thanks to Salesforce’s autonomous AI 
Agents.  These agents can operate in dynamic environments, providing an advantage in the 
execution of complex tasks.  Agentforce allows for customization using natural language (NLP) 
instructions.  Additionally, Agentforce has built-in semantic search, vector databases, and RAG 
(Retrieval Augmented Generation).  By pairing or teaming Agentforce with Data Cloud, you can 
leverage data-driven insights and workflow optimization to improve decision making. Agentforce 
provides 24/7 availability, operating around the clock across multiple channels, as well as 
scalability, allowing companies to scale their workforce on demand. 
 
Key Technical Features: 
●​ Omnichannel integration: Agents can handle customer queries from multiple 
communication channels, such as email, phone, live chat, social media, and messaging 
apps, in a single workspace.  
●​ AI agents: Agentforce agents are autonomous applications that can understand human 
intent, process complex queries, and take autonomous actions.  
●​ Data source connection: Agents can connect to any data source and use it in real time to 
plan, reason, and evaluate.  
●​ Data Discovery and Classification: Agentforce can accurately discover, classify, and 
label sensitive data. 
●​ Automation of Repetitive Tasks (to expand workflow, automation, and API leverage): 
Automates tasks such as logging activities, scheduling follow-ups, and updating records, 
1 


===== PAGE 2 =====
Step-by-step Guide Agentforce 
reducing administrative workload for agents, and other solutions; May require manual 
processes or additional tools to receive similar automation. 
 
Key Concepts of Agentforce 
●​ Agentforce can operate autonomously, reducing the need for human engagement to get 
work done. 
●​ Agentforce can be used to enhance and improve customer experiences. 
●​ Agentforce is low code and easily customizable. 
●​ Users can customize Agentforce to function with use cases, across industries. 
●​ Agentforce optimizes seamless escalations and handoffs to human representatives. 
 
Key Word 
Description 
Agentforce 
Service Agent 
Customer-facing autonomous AI Agent which supports customer self-service 
Agent Builder 
Native tool used for setup & activation of AI Agents 
Atlas Reasoning 
Engine 
The brain inside of Agentforce; proprietary system designed to simulate how humans 
think & plan 
Einstein Trust 
Layer 
Protects customer data using securing features & guardrails like zero data retention, 
secure data retrieval, toxicity detection, and dynamic grounding. 
Audit Trail 
Tracks AI Agent actions & outputs; provides data users can track to ensure that AI Agents 
are in compliance with security & privacy policies 
AI Audit & 
Feedback Data 
Ensures the accuracy and safety  of the responses generated by Agentforce by tracking 
Einstein trust layer functionality such as toxicity detection & data masking. 
 
Engaging Agentforce 
When discussing Agentforce, it’s helpful to explore how we can use it in Salesforce Data Cloud. 
Agentforce leverages the data in the Customer 360 data model, and creates autonomous 
Agents.  These agents perform tasks such as data analysis and order management, freeing up 
our team to maximize and improve customer experiences. In our Sunshine Trails Hospitality 
example, the use cases shown below help illuminate some of the ways that Agentforce can be 
used in Data Cloud for that 360 view of the customer and use advanced reasoning to take 
actions seamlessly! 
 
Data Type 
Description 
Use Case 
2 


===== PAGE 3 =====
Step-by-step Guide Agentforce 
Reservation 
Data 
Includes reservation history, room preferences, 
check-in/check-out times, booking source (OTA, 
direct, GDS), booking time, and cancellation history. 
To understand guest 
preferences, predict stay 
behaviors, and provide 
personalized check-in service. 
Service 
Request & 
Support Data 
Service requests, complaint resolutions, chat 
transcripts, and support call logs. 
To enhance guest experience 
by tracking and resolving 
issues quickly, and prevent 
future complaints. 
Messaging Data 
Text messages, email responses, RTP, WhatsApp 
interactions, and short codes. 
To enable communication with 
guests via their preferred 
channels and provide 
personalized messages. 
Booking 
Channel Data 
Information on the source of booking (direct, OTA, 
GDS), cancellation history, and booking time. 
To understand guest booking 
behavior and improve 
marketing strategies for each 
booking channel. 
 
 
Enable Agentforce 
Let’s dive in and put Agentforce to work for Sunshine Trails Hospitality.  Before we can set up 
our first Agent in Agentforce, we need to make sure that Einstein is set up in Salesforce.  To do 
this, follow the steps below. 
 
Set Up Einstein Generative AI (System Admins)   
1.​ Navigate to Setup > enter Einstein Setup in the Quick Find Box > Click Einstein Setup. 
 
2.​ Click the Turn on Einstein toggle to On > Refresh your browser. 
3.​ Enter Agents in the Quick Find Box > Click the Einstein Copilot for Salesforce toggle to 
On. 
 
3 


===== PAGE 4 =====
Step-by-step Guide Agentforce 
Enable Agents (System Admins)   
1.​ Navigate to Setup. 
2.​ In the Quick Find Box, type Agents > click Agents. 
3.​ Click the name of the agent > click Open in Builder > click Activate. 
 
Tip:  When creating a new Agent, if the New Agent button does not appear, simply 
refresh your page until the New Agent button appears. 
 
 
Create Your Agent 
Now that we've set up & enabled Agents, it’s time for us to build! Follow the steps below to build 
an Agent using Agentforce. 
 
Create an Agent 
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click New Agent. 
2.​ Select your Agent Type (Agentforce Service Agent) > click Next. 
3.​ Confirm the topics (these are added by default) > click Next. 
 
4.​ Change the Name & ensure that the API Name updates. 
4 


===== PAGE 5 =====
Step-by-step Guide Agentforce 
 
5.​ Enter the details for Company > Select an Agent User from the list of available users > 
Click Next. 
6.​ Select your Data Library > Click Create.  
a.​ Adding a Data Library will improve your agent’s responses. Make sure you are 
sharing Data from a trusted data source. When creating a new Agent, include 
data such as specific topics the agent should be able to perform, guidelines for 
the agent’s tone & responses, relevant Salesforce CRM data, and any training 
data from past interactions. 
 
5 


===== PAGE 6 =====
Step-by-step Guide Agentforce 
 
 
 
 
Add Custom Topics & Actions 
We use Topics & Actions to customize Agent Builder.  Topics are categories of tasks the AI 
agent handles, while Actions are the queries the AI Agent uses to complete those tasks within 
the designated topics.  Topics & Actions help drive us to our desired outcome, setting the 
context and providing guard rails for our Agent. 
 
In our Sunshine Trails Hospitality case, an example of a topic with related actions might be: 
​
Topic:  Reservation Cancellation 
​
Possible Actions:​
 
●​ Retrieve reservation details 
●​ Check cancellation eligibility 
●​ Send a cancellation confirmation email 
 
Add a Custom Topic 
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click the Agent you want to 
add a Topic to. 
2.​ Click the Topics tab > Click New > click New Topic. 
3.​ Configure the element by updating the Topic Label, Classification Description, Scope, & 
Instructions > click Next. 
6 


===== PAGE 7 =====
Step-by-step Guide Agentforce 
 
4.​ Add any desired standard actions > click Finish. 
 
Add Actions to a Topic (Flow) only the auto-launch type flow is supported here 
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click the Agent you want to 
add an action to. 
2.​ Click Open in Builder > click the Topics tab > select the Topic > click the This Topic’s 
Actions subtab. 
3.​ Click New > select Add Action > select Flow for the action type. 
 
4.​ Select the Reference Action > click Next > enter an Action Label & confirm the API 
Name. 
7 


===== PAGE 8 =====
Step-by-step Guide Agentforce 
 
 
5.​ Configure the Action with Inputs & Instructions > click Finish. 
 
Add Actions to a Topic (Apex) 
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click the Agent you want to 
add an action to. 
2.​ Click Open in Builder > click the Topics tab > select the Topic > click the This Topic’s 
Actions subtab. 
3.​ Click New > select Add Action > select Apex for the action type. 
4.​ Select the Reference Action > click Next > enter the Action Label & confirm the API 
name. 
8 


===== PAGE 9 =====
Step-by-step Guide Agentforce 
 
5.​ Configure the Action with Inputs & Instructions > click Finish. 
 
Add Actions to a Topic (Prompt Template) 
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click the Agent you want to 
add an action to. 
2.​ Click Open in Builder > click the Topics tab > select the Topic > click the This Topic’s 
Actions subtab. 
3.​ Click New > select Add Action > select Prompt Template for the action type. 
 
 
9 


===== PAGE 10 =====
Step-by-step Guide Agentforce 
4.​ Select the Reference Action > click Next > enter the Action Label & confirm the API 
name. 
5.​ Configure the action with Instructions, Inputs, & Outputs > click Finish. 
 
Now that we have configured our Topics and Actions, let’s explore how they work together via 
Instructions.  Instructions are the guidelines within each topic that direct how an Agent should 
handle specific tasks.  Instructions provide context & structure, guiding our A.I. Agent on how 
to respond to different types of inputs within Topics. 
 
For example:   
If a customer inquires about check-in, we might ask the customer to provide their email address, 
to verify their identity.  Our Agent would verify the customer by running an action named “Get 
Customer Details.” Once the customer is verified, the agent would generate a message saying 
“Hello ‘Customer Name,’ how can I help you?” If the agent is unable to verify the customer a 
message such as “I am unable to verify your information, would you like me to redirect you to a 
live agent?” might be generated. 
 
Now that we see how Instructions drive our Agents in Data Cloud, let’s configure Instructions. 
 
Give Instructions to the Agent  
1.​ Navigate to Setup > enter Agents in the Quick Find Box > click the Agent you want to 
add instructions to. 
2.​ Click Open in Builder > click the Topics tab > select the Topic > click the Topic 
Configuration subtab. 
3.​ Click Add Instructions as many times as needed for your planned instructions > add 
your desired instructions > click Save > click Activate. 
 
Test the Agent  
1.​ From the Agent Builder, click Refresh in the top right corner of the Conversation Preview 
pane. 
 
10 


===== PAGE 11 =====
Step-by-step Guide Agentforce 
 
2.​ Enter your test prompt > press Return/Enter > review the Agent’s responses. 
3.​ Once you are satisfied with the results of the test, click the Back Arrow to return to 
Setup. 
 
Publish an Agent to an Experience Cloud Site 
1.​ Navigate to Setup > enter All Sites in the Quick Find Box > Click Builder next to your 
selected site.  In our example, this is the Sunshine Trails Hospitality site. 
2.​ Click Publish > click Got It > Click the Experience Builder Menu. 
3.​ Click Salesforce Setup > Refresh your browser. 
 
Add Embedded Service Deployments 
1.​ Navigate to Setup > enter Embedded Service Deployments in the Quick Find box. 
2.​ Select the ESA Web Deployment > click Publish to republish with the latest additions. 
a.​ Note: The deployment may take up to 10 minutes. 
  
Enable Messaging For Einstein Service Agent (ESA) Channel  
1.​ Navigate to setup > enter Messaging Settings in the Quick Find box > select 
Messaging Settings. 
2.​ Click the Messaging checkbox. 
3.​ Navigate to the ESA Channel > confirm that ESA is active. 
  
Re-Route the Flow for the Agent Experience Site 
1.​ Navigate to setup > enter Flows in the Quick Find box > click Flows. 
2.​ Click on the Route to ESA flow > click the Route to ESA component > select Edit 
Element. 
3.​ Select the following values in the Set Input Values section: 
a.​ Route To <> Agentforce Service Agent 
11 


===== PAGE 12 =====
Step-by-step Guide Agentforce 
b.​ Agentforce Service Agent <> CC Service Agent 
4.​ Click Save As New Version > keep everything as is > click Save. 
5.​ Click Activate. 
   
Add an Agent to your Site 
1.​ Navigate to Setup > enter All Sites in the Quick Find Box > click All Sites. 
2.​ Find the site you want to add the Agent to > click Builder next to the site name. 
3.​ Click the Components widget > search for the component you want to add to your site 
> drag & drop the component onto the canvas. 
4.​ Confirm the default settings, or update them as desired > click Publish > click Publish 
again in the confirmation window > click Got It. 
 
 
Set up Messaging for In-App and Web (MIAW)  
 
Enable Omni-Channel 
1.​ Navigate to Setup > enter Omni Channel in the Quick Find box > click Omni Channel 
Settings. 
2.​ Click the Enable Omni-Channel checkbox > click Save. 
 
Create an Omni Flow 
1.​ Navigate to Setup > enter Flows in the Quick Find box > click Flows. 
2.​ Click New Flow > in the All + Templates tab, select Omni-Channel Flow. 
3.​ Navigate to the Manager tab > click New Resource > select Variable as your resource 
type. 
4.​ Enter recordId as the API name > specify text for the data type. 
a.​ Note:  The API name is case-sensitive and must be recordId.  The messaging 
channel will use this value to pass information on to the Omni-Channel flow. 
5.​ Check the box for Available for Input > click Done. 
6.​ Navigate to the elements tab > add a Route Work action to your flow > name the action. 
7.​ Select recordId variable as the input value > select Messaging for the Service Channel. 
8.​ Specify the Route To value as Queue, Agent, Bot, or Skills > click Done. 
a.​ If you select Queue, use the Queue ID for the queue where you want the work 
directed 
b.​ If you select Agent, add the agent’s name via the Agent ID field. 
c.​ If you select Bot, search for the bot name. 
d.​ If you select Skills, add the Skill Requirement list. 
9.​ Save & Activate the flow. 
 
Add a Messaging Channel 
1.​ Navigate to setup > enter Messaging Settings in the Quick Find box > click Messaging 
Settings. 
2.​ Click New Channel > select Messaging for In-App and Web > complete the channel 
name > click Save. 
12 


===== PAGE 13 =====
Step-by-step Guide Agentforce 
3.​ Select Routing type Omni Flow > select the Omni-Channel flow & Queue you want to 
use > click Save > activate the channel. 
 
Add Messaging to an App (Web) 
1.​ Navigate to setup > enter App Manager in the Quick Find box > select App Manager. 
2.​ Find the app you want to add messaging to > add the Omni-channel sidebar or utility to 
the app. 
a.​ Add the Omni-channel sidebar 
i.​
Navigate to Setup > enter  App Manager in the Quick Find box > click 
App Manager. 
ii.​
Scroll to the selected app > click the dropdown arrow > click Edit. 
iii.​
The Lightning App Builder opens > in the App Options tab, select Use 
Omni-channel sidebar > click Save. 
b.​ Add the Omni-channel utility 
i.​
Navigate to Setup > enter  App Manager in the Quick Find box > click 
App Manager. 
ii.​
Scroll to the selected app > click the dropdown arrow > click Edit. 
iii.​
The Lightning App Builder opens > click Utility Items (Desktop Only) 
under the App Settings > click Add Utility Item. 
iv.​
Search for Omni Channel > click Omni Channel > click Save. 
3.​ In the Navigation items section, move Messaging Sessions to the Selected Items list > 
click Save. 
4.​ In the User Profiles section, verify that the user profiles which need access to Messaging 
are shown in the Selected Profiles list. 
5.​ Edit the Messaging Session page layout  
a.​ Navigate to Setup > click the Object Manager > click messaging Session > 
click Lightning record pages. 
b.​ Click the page name > click Edit > alternatively, clone the existing default page. 
c.​ Lightning App Builder opens > drag your desired components onto the page. 
d.​ Confirm your new page layout > click Save. 
 
Tip:  the following page components are most relevant to Messaging:  Enhanced 
Conversation, Conversation, Related Record, Flow, Actions & Recommendations, 
Next Best Action, Knowledge, and After Conversation. 
 
Set up Messaging in the Salesforce Mobile App 
1.​ Enable Enhanced Omni 
a.​ Navigate to setup > enter Omni-Channel Settings in the Quick Find box > select 
Omni-Channel Settings. 
b.​ Enable Omni Channel & its features > click Save. 
2.​ Set up your Messaging Channel 
a.​ Navigate to setup > enter Embedded Service Deployments in the Quick Find box 
> select Embedded Service Deployments. 
13 


===== PAGE 14 =====
Step-by-step Guide Agentforce 
b.​ Click the New Deployment button > click Messaging for In-App and Web > click 
Mobile as the destination for your channel. 
c.​ Name your Embedded Service deployment; the API will auto-populate > Select 
your Messaging Channel & add it to the deployment > click Save. 
d.​ Adjust your deployment from the deployment settings page > click the Mobile 
Configuration section of the deployment settings > click Get Code File to 
download the JSON configuration file. 
e.​ Click Publish. 
3.​ Optimize the Agent Console for the Salesforce Mobile App 
a.​ From the desktop, open the agent console > click the Setup icon > click Edit 
Page. 
b.​ Click the Pages dropdown > select + New Page > click Record Page > click Next. 
c.​ Give the layout a label > select Messaging Session as the Object > select a page 
template > click Done. 
d.​ In the layout field, click Phone > add your lightning components, including the 
Enhanced Conversation component > click Save. 
e.​ Click Activation > click Assign as Org Default > select Phone in the Assign Form 
Factor window > click Next > click Save. 
4.​ Prepare Users to Message in the Salesforce Mobile App 
a.​ Assign the Messaging User permission set license to your agents. 
b.​ Assign the Message on Mobile permission to your agents. 
 
 
Connect Your Agent to Customer Channels 
1.​ Navigate to Setup > enter All Sites in the Quick Find Box. 
2.​ Find the site you want to add the Agent to > click edit next to the site name. 
3.​ Click the Components widget > search for the component you want to add to your site 
> drag & drop the component onto the canvas. 
4.​ Confirm the default settings, or update them as desired > click Publish > click Publish 
again in the confirmation window > click Got It. 
 
 
Agent Action Security  
As you configure your Agents, it is important to keep security risks in mind, and to mitigate those 
risks as much as possible.  Agentforce Agents are powerful features, and it is necessary to take 
steps to configure Agents in a way that protects sensitive data.  Let’s explore how we can 
configure Agentforce Agents with authentication and authorization in mind.  Remember that 
Agents should have access to only the minimum user permissions required to complete their 
job, and that agents which are capable of taking private actions should have authentication 
access control built directly into the flow of the action. 
 Agent Classification 
14 


===== PAGE 15 =====
Step-by-step Guide Agentforce 
Public Action 
Public actions can be taken on behalf of anyone, 
regardless of identity.  They require no authentication.  
These actions are grounded in public information. 
Private Action 
Private actions can be taken on behalf of specific users.  
They are restricted to those users only.  The user who 
triggers the action must be authorized to access the 
action in order for an Agentforce Agent to complete a 
private action.  The user’s identity must also be securely 
confirmed.  
  
Guidelines for the Secure Implementations of Private Actions 
●​ Ensure that the agents confirm the identity of the user they’re interacting with before 
taking a private action on the user’s behalf. 
●​ Confirm user identity using techniques such as two-factor authentication 
●​ Save the confirmed user identity in the MessagingSession record. 
  
Key Guidelines 
1.​ Principle of Least Privilege: 
a.​ Restrict Access:  Grant only the minimum necessary permissions to your 
Agentforce Service agent. 
b.​ Review Permissions Regularly:  To ensure that permissions are still 
appropriate, conduct periodic reviews. 
2.​ Robust Access Controls: 
a.​ Enforce Strong Authentication:  Implement strong authentication mechanisms, 
such as two-factor authentication, to verify the identity of users interacting with 
your Agentforce Service agent. 
b.​ Monitor Access Logs:  To identify any suspicious activity, regularly review the 
access logs. 
3.​ Secure Action Design:  
a.​ Limit Scope:  Design actions to operate within specific boundaries and prevent 
unauthorized access to sensitive data.  Build confirmation of user identity and 
permissions directly into each private action. 
b.​ Validate Input:  To prevent malicious input and potential security vulnerabilities, 
implement input validation. 
c.​ Error Handling:  To prevent information disclosure and system instability, 
implement robust error handling. 
  
Authenticating Experience Site Users 
1.​ When deploying an Agentforce Service Agent to a custom site or app with its 
non-Salesforce authentication mechanism, map your Agentforce Messaging Session to 
a MessagingSession record. 
15 


===== PAGE 16 =====
Step-by-step Guide Agentforce 
2.​ Employ the User Verification feature to allow the custom site or app to securely pass a 
user identifier.  
3.​ The user identifier is saved to the MessagingEndUser record. 
4.​ The MessagingEndUser record serves as a confirmation of the user’s identity. 
  
Tip:  This method does not automatically track an authenticated AuthSession.  There 
is no way to immediately invalidate authentication after granting it.  Expiration dates 
should be defined with the knowledge that authentication is valid until the date 
embedded in the token is reached. 
 
 Best Practices 
●​ When creating Topics, group topics together based on their purpose. 
●​ When defining Actions, include things like generating text, sending emails, and 
searching knowledge bases. 
●​ When building an Agent, take advantage of the Guided Setup.  This process walks you 
through creating an agent, associating topics, adding actions, etc. 
●​ Use custom Topics & Actions to interact with your data. 
●​ Routinely test your agents once they are built to ensure that you are creating the desired 
output. 
 
 
Conclusion 
Agentforce is a powerful tool that works 24/7 to support you & your customers.  By tapping into 
the power of Agentforce, you can automate flows and make the customer experience seamless.  
Explore the ways that Agentforce can work for you! 
 
Resources 
Salesforce News:  Salesforce's Agentforce is Here  
Salesforce: Agentforce and RAG Best Practices for Better Agents 
Salesforce Help:  Set Up Einstein Generative AI  
Salesforce Help:  Prepare a Salesforce Org for Messaging for In-App and Web 
Salesforce Help:  Set Up Messaging in the Salesforce Mobile App  
Salesforce Help:  Configure a Messaging for In-App Deployment  
Salesforce Help:  Create Service Channels  
Trailhead:  Enable and Customize the Agentforce Default Agent  
Trailhead:  Configure an Agentforce Service Agent  
 
 
16 
